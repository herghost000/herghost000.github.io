<!DOCTYPE HTML>
<html lang="zh-CN">

<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="ZackAddy&#39;s Blog - 不积跬步，无以至千里；不积小流，无以成江海">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://www.zackaddy.xin">
    <!--SEO-->

<meta name="keywords" content="OpenGL">


<meta name="description" content="OpenGL 之网格简介当使用建模工具对物体建模的时候，艺术家通常不会用单个形状创建出整个模型。
通常每个模型都由几个子模型/形状组合而成。
组合模型的每个单独的形状就叫做一个网格(Mesh)。...">


<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->

<title>
    
    43、OpenGL 之网格 |
    
    ZackAddy&#39;s Blog - 不积跬步，无以至千里；不积小流，无以成江海
</title>

<link rel="alternate" href="/atom.xml" title="ZackAddy&#39;s Blog - 不积跬步，无以至千里；不积小流，无以成江海" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">

    

<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
    



    

</head></html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
<canvas id="canvas" style="position: fixed;width: 100%;height: 100%;left: 0;top: 0;"></canvas>
<a href="https://github.com/herghost000"><img style="position: absolute;left: 0;top: 0;z-index: 11" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_left_darkblue_121621.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    <header class="main-header"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='ZackAddy'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <h2>
                从未如此简单有趣
            </h2>
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://www.zackaddy.xin">
                        ZackAddy&#39;s Blog - 不积跬步，无以至千里；不积小流，无以成江海</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa"></i>HOME</a>
                        </li>
                        <li role="presentation" class="text-center">
                            <a href="/categories"><i class="fa"></i>CATEGORIES</a>
                        </li>
                        <li role="presentation" class="text-center">
                            <a href="/archives"><i class="fa"></i>TIMELINE</a>
                        </li>
                        <li role="presentation" class="text-center">
                            <a href="/about"><i class="fa"></i>ABOUT</a>
                        </li>
                    </ul>
<!--                    <div class="menu-title">-->
<!--                        <a href="/"><i class="fa"></i>首页</a>-->
<!--                    </div>-->
<!--                    <div class="menu-title">-->
<!--                        <span>分类</span>-->
<!--                        <ul class="menu">-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/LinearAlgebra/"><i class="fa "></i>-->
<!--                                        LinearAlgebra</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Cocos Creator/"><i class="fa "></i>-->
<!--                                        Cocos Creator</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/OpenGL/"><i class="fa "></i>-->
<!--                                        OpenGL</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/JavaScript/"><i class="fa "></i>-->
<!--                                        JavaScript</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/代码重构/"><i class="fa "></i>-->
<!--                                        代码重构</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/C/"><i class="fa "></i>-->
<!--                                        C</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Cpp/"><i class="fa "></i>-->
<!--                                        C++</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/数据结构/"><i class="fa "></i>-->
<!--                                        数据结构</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Cpp设计模式/"><i class="fa "></i>-->
<!--                                        C++设计模式</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/MFC/"><i class="fa "></i>-->
<!--                                        MFC</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/STL/"><i class="fa "></i>-->
<!--                                        STL</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/COM组件/"><i class="fa "></i>-->
<!--                                        COM组件</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Golang/"><i class="fa "></i>-->
<!--                                        Golang</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Mysql/"><i class="fa "></i>-->
<!--                                        Mysql</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Redis/"><i class="fa "></i>-->
<!--                                        Redis</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Nginx/"><i class="fa "></i>-->
<!--                                        Nginx</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/PHP/"><i class="fa "></i>-->
<!--                                        PHP</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/8086汇编/"><i class="fa "></i>-->
<!--                                        8086汇编</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/x86汇编/"><i class="fa "></i>-->
<!--                                        x86汇编</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Smali汇编/"><i class="fa "></i>-->
<!--                                        Smali汇编</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Lua/"><i class="fa "></i>-->
<!--                                        Lua</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/逆向分析/"><i class="fa "></i>-->
<!--                                        逆向分析</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Windows驱动/"><i class="fa "></i>-->
<!--                                        Windows驱动</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Windows内核/"><i class="fa "></i>-->
<!--                                        Windows内核</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Vue/"><i class="fa "></i>-->
<!--                                        Vue</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/React/"><i class="fa "></i>-->
<!--                                        React</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/Flutter Widget/"><i class="fa "></i>-->
<!--                                        Flutter Widget</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/categories/计算机网络/"><i class="fa "></i>-->
<!--                                        计算机网络</a>-->
<!--                                </li>-->
<!--                            -->
<!--                                <li role="presentation" class="text-center">-->
<!--                                    <a href="/archives/"><i class="fa "></i>-->
<!--                                        时间轴</a>-->
<!--                                </li>-->
<!--                            -->
<!--                        </ul>-->
<!--                    </div>-->
                </div>
            </div>
        </div>
    </div>
</nav>

    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="43、OpenGL 之网格">
            
            43、OpenGL 之网格
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/OpenGL/">OpenGL</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-link" href="/tags/OpenGL/">OpenGL</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2020/06/11</span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <h2 id="OpenGL-之网格"><a href="#OpenGL-之网格" class="headerlink" title="OpenGL 之网格"></a><strong>OpenGL 之网格</strong></h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h3><p>当使用建模工具对物体建模的时候，艺术家通常不会用单个形状创建出整个模型。</p>
<p>通常每个模型都由几个子模型/形状组合而成。</p>
<p>组合模型的每个单独的形状就叫做一个网格(Mesh)。</p>
<p>比如说有一个人形的角色：艺术家通常会将头部、四肢、衣服、武器建模为分开的组件，并将这些网格组合而成的结果表现为最终的模型。</p>
<p>一个网格是我们在OpenGL中绘制物体所需的最小单位（顶点数据、索引和材质属性）。一个模型（通常）会包括多个网格。</p>
<p>通过使用Assimp，我们可以加载不同的模型到程序中，但是载入后它们都被储存为Assimp的数据结构。我们最终仍要将这些数据转换为OpenGL能够理解的格式，这样才能渲染这个物体。</p>
<p>网格(Mesh)代表的是单个的可绘制实体，我们现在先来定义一个我们自己的网格类。</p>
<p>一个网格应该至少需要一系列的顶点，每个顶点包含一个位置向量、一个法向量和一个纹理坐标向量。一个网格还应该包含用于索引绘制的索引以及纹理形式的材质数据（漫反射/镜面光贴图）。</p>
<p>既然我们有了一个网格类的最低需求，我们可以在OpenGL中定义一个顶点了：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">struct</span> <span class="selector-tag">Vertex</span> &#123;</span><br><span class="line">    <span class="attribute">glm</span>::vec3 Position;</span><br><span class="line">    <span class="attribute">glm</span>::vec3 Normal;</span><br><span class="line">    <span class="attribute">glm</span>::vec2 TexCoords;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们将所有需要的向量储存到一个叫做Vertex的结构体中，我们可以用它来索引每个顶点属性。除了Vertex结构体之外，我们还需要将纹理数据整理到一个Texture结构体中。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">struct Texture &#123;</span><br><span class="line">    unsigned int id;</span><br><span class="line">    string type;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们储存了纹理的id以及它的类型，比如是漫反射贴图或者是镜面光贴图。</p>
<p>知道了顶点和纹理的实现，我们可以开始定义网格类的结构了：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mesh</span> &#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="comment">/*  网格数据  */</span></span><br><span class="line">        <span class="built_in">vector</span>&lt;Vertex&gt; vertices;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; indices;</span><br><span class="line">        <span class="built_in">vector</span>&lt;Texture&gt; textures;</span><br><span class="line">        <span class="comment">/*  函数  */</span></span><br><span class="line">        Mesh(<span class="built_in">vector</span>&lt;Vertex&gt; vertices, <span class="built_in">vector</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; indices, <span class="built_in">vector</span>&lt;Texture&gt; textures);</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Draw</span><span class="params">(Shader shader)</span></span>;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        <span class="comment">/*  渲染数据  */</span></span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">int</span> VAO, VBO, EBO;</span><br><span class="line">        <span class="comment">/*  函数  */</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setupMesh</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>你可以看到这个类并不复杂。在构造器中，我们将所有必须的数据赋予了网格，我们在setupMesh函数中初始化缓冲，并最终使用Draw函数来绘制网格。注意我们将一个着色器传入了Draw函数中，将着色器传入网格类中可以让我们在绘制之前设置一些uniform（像是链接采样器到纹理单元）。</p>
<p>构造器的内容非常易于理解。我们只需要使用构造器的参数设置类的公有变量就可以了。我们在构造器中还调用了setupMesh函数：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="constructor">Mesh(<span class="params">vector</span>&lt;Vertex&gt; <span class="params">vertices</span>, <span class="params">vector</span>&lt;<span class="params">unsigned</span> <span class="params">int</span>&gt; <span class="params">indices</span>, <span class="params">vector</span>&lt;Texture&gt; <span class="params">textures</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    this-&gt;vertices = vertices;</span><br><span class="line">    this-&gt;indices = indices;</span><br><span class="line">    this-&gt;textures = textures;</span><br><span class="line"></span><br><span class="line">    setup<span class="constructor">Mesh()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a><strong>初始化</strong></h3><p>由于有了构造器，我们现在有一大列的网格数据用于渲染。在此之前我们还必须配置正确的缓冲，并通过顶点属性指针定义顶点着色器的布局。现在你应该对这些概念都很熟悉了，但我们这次会稍微有一点变动，使用结构体中的顶点数据：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">void setup<span class="constructor">Mesh()</span></span><br><span class="line">&#123;</span><br><span class="line">    gl<span class="constructor">GenVertexArrays(1, &amp;VAO)</span>;</span><br><span class="line">    gl<span class="constructor">GenBuffers(1, &amp;VBO)</span>;</span><br><span class="line">    gl<span class="constructor">GenBuffers(1, &amp;EBO)</span>;</span><br><span class="line"></span><br><span class="line">    gl<span class="constructor">BindVertexArray(VAO)</span>;</span><br><span class="line">    gl<span class="constructor">BindBuffer(GL_ARRAY_BUFFER, VBO)</span>;</span><br><span class="line"></span><br><span class="line">    gl<span class="constructor">BufferData(GL_ARRAY_BUFFER, <span class="params">vertices</span>.<span class="params">size</span>()</span><span class="operator"> * </span>sizeof(Vertex), &amp;vertices<span class="literal">[<span class="number">0</span>]</span>, GL_STATIC_DRAW);  </span><br><span class="line"></span><br><span class="line">    gl<span class="constructor">BindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO)</span>;</span><br><span class="line">    gl<span class="constructor">BufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="params">indices</span>.<span class="params">size</span>()</span><span class="operator"> * </span>sizeof(unsigned <span class="built_in">int</span>), </span><br><span class="line">                 &amp;indices<span class="literal">[<span class="number">0</span>]</span>, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 顶点位置</span></span><br><span class="line">    gl<span class="constructor">EnableVertexAttribArray(0)</span>;   </span><br><span class="line">    gl<span class="constructor">VertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 顶点法线</span></span><br><span class="line">    gl<span class="constructor">EnableVertexAttribArray(1)</span>;   </span><br><span class="line">    gl<span class="constructor">VertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)offsetof(Vertex, Normal));</span><br><span class="line">    <span class="comment">// 顶点纹理坐标</span></span><br><span class="line">    gl<span class="constructor">EnableVertexAttribArray(2)</span>;   </span><br><span class="line">    gl<span class="constructor">VertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)offsetof(Vertex, TexCoords));</span><br><span class="line"></span><br><span class="line">    gl<span class="constructor">BindVertexArray(0)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码应该和你所想得没什么不同，但有了Vertex结构体的帮助，我们使用了一些小技巧。</p>
<p>C++结构体有一个很棒的特性，它们的内存布局是连续的(Sequential)。也就是说，如果我们将结构体作为一个数据数组使用，那么它将会以顺序排列结构体的变量，这将会直接转换为我们在数组缓冲中所需要的float（实际上是字节）数组。比如说，如果我们有一个填充后的Vertex结构体，那么它的内存布局将会等于：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vertex vertex;</span><br><span class="line">vertex.Position  = glm::vec3(<span class="number">0.2f</span>, <span class="number">0.4f</span>, <span class="number">0.6f</span>);</span><br><span class="line">vertex.Normal    = glm::vec3(<span class="number">0.0f</span>, <span class="number">1.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line">vertex.TexCoords = glm::vec2(<span class="number">1.0f</span>, <span class="number">0.0f</span>);</span><br><span class="line"><span class="comment">// = [0.2f, 0.4f, 0.6f, 0.0f, 1.0f, 0.0f, 1.0f, 0.0f];</span></span><br></pre></td></tr></table></figure>

<p>由于有了这个有用的特性，我们能够直接传入一大列的Vertex结构体的指针作为缓冲的数据，它们将会完美地转换为glBufferData所能用的参数：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gl<span class="constructor">BufferData(GL_ARRAY_BUFFER, <span class="params">vertices</span>.<span class="params">size</span>()</span><span class="operator"> * </span>sizeof(Vertex), &amp;vertices<span class="literal">[<span class="number">0</span>]</span>, GL_STATIC_DRAW);</span><br></pre></td></tr></table></figure>

<p>自然sizeof运算也可以用在结构体上来计算它的字节大小。这个应该是32字节的（8个float * 每个4字节）。</p>
<p>结构体的另外一个很好的用途是它的预处理指令offsetof(s, m)，它的第一个参数是一个结构体，第二个参数是这个结构体中变量的名字。这个宏会返回那个变量距结构体头部的字节偏移量(Byte Offset)。这正好可以用在定义glVertexAttribPointer函数中的偏移参数：</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">glVertexAttribPointer(<span class="number">1</span>, <span class="number">3</span>, GL_FLOAT, GL_FALSE, sizeof(<span class="name">Vertex</span>), (<span class="name">void*</span>)offsetof(<span class="name">Vertex</span>, Normal))<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>偏移量现在是使用offsetof来定义了，在这里它会将法向量的字节偏移量设置为结构体中法向量的偏移量，也就是3个float，即12字节。注意，我们同样将步长参数设置为了Vertex结构体的大小。</p>
<p>使用这样的一个结构体不仅能够提供可读性更高的代码，也允许我们很容易地拓展这个结构。如果我们希望添加另一个顶点属性，我们只需要将它添加到结构体中就可以了。由于它的灵活性，渲染的代码不会被破坏。</p>
<h3 id="渲染"><a href="#渲染" class="headerlink" title="渲染"></a><strong>渲染</strong></h3><p>我们需要为Mesh类定义最后一个函数，它的Draw函数。在真正渲染这个网格之前，我们需要在调用glDrawElements函数之前先绑定相应的纹理。然而，这实际上有些困难，我们一开始并不知道这个网格（如果有的话）有多少纹理、纹理是什么类型的。所以我们该如何在着色器中设置纹理单元和采样器呢？</p>
<p>为了解决这个问题，我们需要设定一个命名标准：每个漫反射纹理被命名为texture_diffuseN，每个镜面光纹理应该被命名为texture_specularN，其中N的范围是1到纹理采样器最大允许的数字。比如说我们对某一个网格有3个漫反射纹理，2个镜面光纹理，它们的纹理采样器应该之后会被调用：</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uniform</span> <span class="type">sampler2D</span> texture_diffuse1;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">sampler2D</span> texture_diffuse2;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">sampler2D</span> texture_diffuse3;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">sampler2D</span> texture_specular1;</span><br><span class="line"><span class="keyword">uniform</span> <span class="type">sampler2D</span> texture_specular2;</span><br></pre></td></tr></table></figure>

<p>根据这个标准，我们可以在着色器中定义任意需要数量的纹理采样器，如果一个网格真的包含了（这么多）纹理，我们也能知道它们的名字是什么。根据这个标准，我们也能在一个网格中处理任意数量的纹理，开发者也可以自由选择需要使用的数量，他只需要定义正确的采样器就可以了（虽然定义少的话会有点浪费绑定和uniform调用）。</p>
<p>像这样的问题有很多种不同的解决方案。如果你不喜欢这个解决方案，你可以自己想一个你自己的解决办法。</p>
<p>最终的渲染代码是这样的：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">void <span class="constructor">Draw(Shader <span class="params">shader</span>)</span> </span><br><span class="line">&#123;</span><br><span class="line">    unsigned <span class="built_in">int</span> diffuseNr = <span class="number">1</span>;</span><br><span class="line">    unsigned <span class="built_in">int</span> specularNr = <span class="number">1</span>;</span><br><span class="line">    for(unsigned <span class="built_in">int</span> i = <span class="number">0</span>; i &lt; textures.size<span class="literal">()</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        gl<span class="constructor">ActiveTexture(GL_TEXTURE0 + <span class="params">i</span>)</span>; <span class="comment">// 在绑定之前激活相应的纹理单元</span></span><br><span class="line">        <span class="comment">// 获取纹理序号（diffuse_textureN 中的 N）</span></span><br><span class="line">        <span class="built_in">string</span> number;</span><br><span class="line">        <span class="built_in">string</span> name = textures<span class="literal">[<span class="identifier">i</span>]</span>.<span class="keyword">type</span>;</span><br><span class="line">        <span class="keyword">if</span>(name<span class="operator"> == </span><span class="string">"texture_diffuse"</span>)</span><br><span class="line">            number = std::<span class="keyword">to</span><span class="constructor">_string(<span class="params">diffuseNr</span><span class="operator">++</span>)</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(name<span class="operator"> == </span><span class="string">"texture_specular"</span>)</span><br><span class="line">            number = std::<span class="keyword">to</span><span class="constructor">_string(<span class="params">specularNr</span><span class="operator">++</span>)</span>;</span><br><span class="line"></span><br><span class="line">        shader.set<span class="constructor">Float((<span class="string">"material."</span> + <span class="params">name</span> + <span class="params">number</span>)</span>.c<span class="constructor">_str()</span>, i);</span><br><span class="line">        gl<span class="constructor">BindTexture(GL_TEXTURE_2D, <span class="params">textures</span>[<span class="params">i</span>].<span class="params">id</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    gl<span class="constructor">ActiveTexture(GL_TEXTURE0)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绘制网格</span></span><br><span class="line">    gl<span class="constructor">BindVertexArray(VAO)</span>;</span><br><span class="line">    gl<span class="constructor">DrawElements(GL_TRIANGLES, <span class="params">indices</span>.<span class="params">size</span>()</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">    gl<span class="constructor">BindVertexArray(0)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们首先计算了每个纹理类型的N-分量，并将其拼接到纹理类型字符串上，来获取对应的uniform名称。接下来我们查找对应的采样器，将它的位置值设置为当前激活的纹理单元，并绑定纹理。这也是我们在Draw函数中需要着色器的原因。我们也将”material.”添加到了最终的uniform名称中，因为我们希望将纹理储存在一个材质结构体中（这在每个实现中可能都不同）。</p>
<p>注意我们在将漫反射计数器和镜面光计数器插入stringstream时，对它们进行了递增。在C++中，这个递增操作：variable++将会返回变量本身，之后再递增，而++variable则是先递增，再返回值。在我们的例子中是首先将原本的计数器值插入stringstream，之后再递增它，供下一次循环使用。</p>
<h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a><strong>源码</strong></h3><p>mesh.h</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">#ifndef MESH_H</span><br><span class="line">#define MESH_H</span><br><span class="line"></span><br><span class="line">#<span class="keyword">include</span> &lt;glad/glad.h&gt; <span class="comment">// holds all OpenGL type declarations</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">include</span> &lt;glm/glm.hpp&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;glm/gtc/matrix_transform.hpp&gt;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">include</span> <span class="string">"shader.h"</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">include</span> &lt;<span class="built_in">string</span>&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;vector&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Vertex &#123;</span><br><span class="line">	<span class="comment">// 顶点</span></span><br><span class="line">	glm::vec3 Position;</span><br><span class="line">	<span class="comment">// 法线</span></span><br><span class="line">	glm::vec3 Normal;</span><br><span class="line">	<span class="comment">// 纹理坐标</span></span><br><span class="line">	glm::vec2 TexCoords;</span><br><span class="line">	<span class="comment">// 切线</span></span><br><span class="line">	glm::vec3 Tangent;</span><br><span class="line">	<span class="comment">// 双切线</span></span><br><span class="line">	glm::vec3 Bitangent;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> Texture &#123;</span><br><span class="line">	unsigned <span class="built_in">int</span> id;</span><br><span class="line">	<span class="built_in">string</span> <span class="keyword">type</span>;</span><br><span class="line">	<span class="built_in">string</span> path;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Mesh &#123;</span><br><span class="line">public:</span><br><span class="line">	<span class="comment">// 网格数据</span></span><br><span class="line">	vector&lt;Vertex&gt;       vertices;</span><br><span class="line">	vector&lt;unsigned <span class="built_in">int</span>&gt; indices;</span><br><span class="line">	vector&lt;Texture&gt;      textures;</span><br><span class="line">	unsigned <span class="built_in">int</span> VAO;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// constructor</span></span><br><span class="line">	<span class="constructor">Mesh(<span class="params">vector</span>&lt;Vertex&gt; <span class="params">vertices</span>, <span class="params">vector</span>&lt;<span class="params">unsigned</span> <span class="params">int</span>&gt; <span class="params">indices</span>, <span class="params">vector</span>&lt;Texture&gt; <span class="params">textures</span>)</span></span><br><span class="line">	&#123;</span><br><span class="line">		this-&gt;vertices = vertices;</span><br><span class="line">		this-&gt;indices = indices;</span><br><span class="line">		this-&gt;textures = textures;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 现在我们已经有了所有需要的数据，设置顶点缓冲区和它的顶点属性指针。</span></span><br><span class="line">		setup<span class="constructor">Mesh()</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 渲染网格</span></span><br><span class="line">	void <span class="constructor">Draw(Shader &amp;<span class="params">shader</span>)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 绑定对应的纹理</span></span><br><span class="line">		unsigned <span class="built_in">int</span> diffuseNr = <span class="number">1</span>;</span><br><span class="line">		unsigned <span class="built_in">int</span> specularNr = <span class="number">1</span>;</span><br><span class="line">		unsigned <span class="built_in">int</span> normalNr = <span class="number">1</span>;</span><br><span class="line">		unsigned <span class="built_in">int</span> heightNr = <span class="number">1</span>;</span><br><span class="line">		for (unsigned <span class="built_in">int</span> i = <span class="number">0</span>; i &lt; textures.size<span class="literal">()</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			gl<span class="constructor">ActiveTexture(GL_TEXTURE0 + <span class="params">i</span>)</span>; <span class="comment">// active proper texture unit before binding</span></span><br><span class="line">			<span class="comment">// retrieve texture number (the N in diffuse_textureN)</span></span><br><span class="line">			<span class="built_in">string</span> number;</span><br><span class="line">			<span class="built_in">string</span> name = textures<span class="literal">[<span class="identifier">i</span>]</span>.<span class="keyword">type</span>;</span><br><span class="line">			<span class="keyword">if</span> (name<span class="operator"> == </span><span class="string">"texture_diffuse"</span>)</span><br><span class="line">				number = std::<span class="keyword">to</span><span class="constructor">_string(<span class="params">diffuseNr</span><span class="operator">++</span>)</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (name<span class="operator"> == </span><span class="string">"texture_specular"</span>)</span><br><span class="line">				number = std::<span class="keyword">to</span><span class="constructor">_string(<span class="params">specularNr</span><span class="operator">++</span>)</span>; <span class="comment">// transfer unsigned int to stream</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (name<span class="operator"> == </span><span class="string">"texture_normal"</span>)</span><br><span class="line">				number = std::<span class="keyword">to</span><span class="constructor">_string(<span class="params">normalNr</span><span class="operator">++</span>)</span>; <span class="comment">// transfer unsigned int to stream</span></span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span> (name<span class="operator"> == </span><span class="string">"texture_height"</span>)</span><br><span class="line">				number = std::<span class="keyword">to</span><span class="constructor">_string(<span class="params">heightNr</span><span class="operator">++</span>)</span>; <span class="comment">// transfer unsigned int to stream</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">// now set the sampler to the correct texture unit</span></span><br><span class="line">			gl<span class="constructor">Uniform1i(<span class="params">glGetUniformLocation</span>(<span class="params">shader</span>.ID, (<span class="params">name</span> + <span class="params">number</span>)</span>.c<span class="constructor">_str()</span>), i);</span><br><span class="line">			<span class="comment">// and finally bind the texture</span></span><br><span class="line">			gl<span class="constructor">BindTexture(GL_TEXTURE_2D, <span class="params">textures</span>[<span class="params">i</span>].<span class="params">id</span>)</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 画网格</span></span><br><span class="line">		gl<span class="constructor">BindVertexArray(VAO)</span>;</span><br><span class="line">		gl<span class="constructor">DrawElements(GL_TRIANGLES, <span class="params">indices</span>.<span class="params">size</span>()</span>, GL_UNSIGNED_INT, <span class="number">0</span>);</span><br><span class="line">		gl<span class="constructor">BindVertexArray(0)</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// 一旦配置好，就将所有内容设置回默认值总是好的做法。</span></span><br><span class="line">		gl<span class="constructor">ActiveTexture(GL_TEXTURE0)</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="comment">// render data </span></span><br><span class="line">	unsigned <span class="built_in">int</span> VBO, EBO;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// initializes all the buffer objects/arrays</span></span><br><span class="line">	void setup<span class="constructor">Mesh()</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// create buffers/arrays</span></span><br><span class="line">		gl<span class="constructor">GenVertexArrays(1, &amp;VAO)</span>;</span><br><span class="line">		gl<span class="constructor">GenBuffers(1, &amp;VBO)</span>;</span><br><span class="line">		gl<span class="constructor">GenBuffers(1, &amp;EBO)</span>;</span><br><span class="line"></span><br><span class="line">		gl<span class="constructor">BindVertexArray(VAO)</span>;</span><br><span class="line">		<span class="comment">// load data into vertex buffers</span></span><br><span class="line">		gl<span class="constructor">BindBuffer(GL_ARRAY_BUFFER, VBO)</span>;</span><br><span class="line">		<span class="comment">// A great thing about structs is that their memory layout is sequential for all its items.</span></span><br><span class="line">		<span class="comment">// The effect is that we can simply pass a pointer to the struct and it translates perfectly to a glm::vec3/2 array which</span></span><br><span class="line">		<span class="comment">// again translates to 3/2 floats which translates to a byte array.</span></span><br><span class="line">		gl<span class="constructor">BufferData(GL_ARRAY_BUFFER, <span class="params">vertices</span>.<span class="params">size</span>()</span><span class="operator"> * </span>sizeof(Vertex), &amp;vertices<span class="literal">[<span class="number">0</span>]</span>, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">		gl<span class="constructor">BindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO)</span>;</span><br><span class="line">		gl<span class="constructor">BufferData(GL_ELEMENT_ARRAY_BUFFER, <span class="params">indices</span>.<span class="params">size</span>()</span><span class="operator"> * </span>sizeof(unsigned <span class="built_in">int</span>), &amp;indices<span class="literal">[<span class="number">0</span>]</span>, GL_STATIC_DRAW);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// set the vertex attribute pointers</span></span><br><span class="line">		<span class="comment">// vertex Positions</span></span><br><span class="line">		gl<span class="constructor">EnableVertexAttribArray(0)</span>;</span><br><span class="line">		gl<span class="constructor">VertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)<span class="number">0</span>);</span><br><span class="line">		<span class="comment">// vertex normals</span></span><br><span class="line">		gl<span class="constructor">EnableVertexAttribArray(1)</span>;</span><br><span class="line">		gl<span class="constructor">VertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)offsetof(Vertex, Normal));</span><br><span class="line">		<span class="comment">// vertex texture coords</span></span><br><span class="line">		gl<span class="constructor">EnableVertexAttribArray(2)</span>;</span><br><span class="line">		gl<span class="constructor">VertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)offsetof(Vertex, TexCoords));</span><br><span class="line">		<span class="comment">// vertex tangent</span></span><br><span class="line">		gl<span class="constructor">EnableVertexAttribArray(3)</span>;</span><br><span class="line">		gl<span class="constructor">VertexAttribPointer(3, 3, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)offsetof(Vertex, Tangent));</span><br><span class="line">		<span class="comment">// vertex bitangent</span></span><br><span class="line">		gl<span class="constructor">EnableVertexAttribArray(4)</span>;</span><br><span class="line">		gl<span class="constructor">VertexAttribPointer(4, 3, GL_FLOAT, GL_FALSE, <span class="params">sizeof</span>(Vertex)</span>, (void*)offsetof(Vertex, Bitangent));</span><br><span class="line"></span><br><span class="line">		gl<span class="constructor">BindVertexArray(0)</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
    </div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">ZackAddy</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/2020/06/12/OpenGL/44、OpenGL 之模型/" class="pre-post btn btn-default" title='44、OpenGL 之模型'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            44、OpenGL 之模型</span>
    </a>
    
    
    <a href="/2020/06/11/OpenGL/42、OpenGL 之模型加载库Assimp/" class="next-post btn btn-default" title='42、OpenGL 之模型加载库Assimp'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            42、OpenGL 之模型加载库Assimp</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    
<p>评论系统未开启，无法评论！</p>

</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            文章目录
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#OpenGL-之网格"><span class="toc-text">OpenGL 之网格</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#简介"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化"><span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#渲染"><span class="toc-text">渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#源码"><span class="toc-text">源码</span></a></li></ol></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2012
                    
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/herghost000" class="copyright-links" target="_blank" rel="nofollow">ZackX</a>
                </span>
            </div>
        </div>
    </div>
</div>


<script src="/assets/tagcanvas.min.js?rev=2.9"></script>
<script>
var tagOption = {
    textColour: '#444', // 字体颜色
    outlineMethod: 'block', // 选中模式
    outlineColour: '#FFDAB9', // 选中模式的颜色
    interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
    textHeight: 13,
    outlineRadius: 3,
    freezeActive: true || '', // 选中的标签是否继续滚动
    frontSelect: true || '', // 不选标签云后部的标签
    initial: [0.1, -0.1],
    depth: 0.5,
    decel: 0.95,
    maxSpeed: 0.03,
    reverse: true || '', // 是否反向触发
    fadeIn: 500, // 进入动画时间
    wheelZoom: false || '' // 是否启用鼠标滚轮
}
TagCanvas.Start('tag-cloud-3d', '', tagOption);
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/parallax/3.1.0/parallax.min.js"></script>
<script src="/js/app.js?rev=@@hash"></script>



</body>
</html>
